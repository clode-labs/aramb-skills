# Aramb Configuration for Tic-Tac-Toe Game
# Auto-generated from codebase analysis

# Project Definition
[[project]]
uniqueIdentifier = 1
name = "Tic-Tac-Toe Game"
description = "A complete tic-tac-toe game application with Node.js backend API and vanilla JavaScript frontend"
tags = ["game", "nodejs", "express", "javascript"]

# Application Definition
[[application]]
uniqueIdentifier = 10
name = "Tic-Tac-Toe Application"
project = 1
description = "Interactive tic-tac-toe game with REST API backend and static frontend"
tags = ["web-game", "api", "frontend"]

# Service 1: Backend Build Service (Builds Docker Image)
[[services]]
uniqueIdentifier = 100
name = "backend-build"
type = "build"
application = 10

[services.configuration]
  # Build service for creating backend Docker image
  [services.configuration.settings]
  repoUrl = "https://github.com/user/tic-tac-toe"  # UPDATE: Replace with actual Git repo URL
  buildPath = "backend"                             # Build context is the backend directory
  targetBranches = ["main"]                         # Deploy from main branch
  installationId = ""                               # UPDATE: GitHub App installation ID
  # Outputs: outputs.IMAGE_URL (Docker image URL)

# Service 2: Backend API (Node.js/Express)
[[services]]
uniqueIdentifier = 101
name = "backend-api"
type = "backend"
application = 10

[services.configuration]
  # Backend service uses the image built by service 100
  [services.configuration.settings]
  image = "${100.outputs.IMAGE_URL}"                # Reference build service output
  cmd = "npm install && npm start"                  # Install dependencies and start server
  commandPort = 3000                                # API server port
  publicNet = true                                  # Expose API publicly

  # Vars - Non-sensitive configuration
  [[services.configuration.vars]]
  key = "PORT"
  value = "3000"

  [[services.configuration.vars]]
  key = "NODE_ENV"
  value = "production"

# Service 3: Frontend Build Service (Builds Static Files)
[[services]]
uniqueIdentifier = 102
name = "frontend-build"
type = "build"
application = 10

[services.configuration]
  # Build service for creating frontend static files
  [services.configuration.settings]
  repoUrl = "https://github.com/user/tic-tac-toe"  # UPDATE: Replace with actual Git repo URL
  buildPath = "frontend"                            # Build context is the frontend directory
  targetBranches = ["main"]                         # Deploy from main branch
  installationId = ""                               # UPDATE: GitHub App installation ID
  # Outputs: outputs.PATH (Static files path)

# Service 4: Frontend (Static HTML/CSS/JS)
[[services]]
uniqueIdentifier = 103
name = "frontend-web"
type = "frontend"
application = 10

[services.configuration]
  # Frontend service uses the static files built by service 102
  [services.configuration.settings]
  staticPath = "${102.outputs.PATH}"                # Reference build service output
  cmd = "npx http-server -p 8080"                   # Serve static files with http-server
  commandPort = 8080                                # Frontend server port
  publicNet = true                                  # Expose frontend publicly

  # Vars - Non-sensitive configuration
  [[services.configuration.vars]]
  key = "API_URL"
  value = "http://localhost:3000"                   # UPDATE: Replace with actual backend service URL after deployment

  [[services.configuration.vars]]
  key = "PORT"
  value = "8080"

# Configuration Status
[config_status]
status = "incomplete"
completed = []
incomplete = [100, 101, 102, 103]
message = "Configuration created. ACTION REQUIRED: 1) Update 'repoUrl' fields in build services (100, 102) with actual Git repository URL. 2) Add GitHub App 'installationId' to build services (100, 102). 3) Build service 100 outputs IMAGE_URL for backend service 101. 4) Build service 102 outputs PATH for frontend service 103. 5) Update frontend 'API_URL' to point to deployed backend service URL."
